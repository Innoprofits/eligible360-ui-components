class EligibleCondition{constructor(e){this.el=document.querySelector(e.el),this.onAnswer=e.onAnswer,this.labels={next:e.next_label||"Suivant"}}mountComponent(e){this.el.innerHTML="",this.el.append(e)}render(e){let t=()=>{switch(e.input){case"Boolean":return this.renderBoolean(e);case"Text":return this.renderText(e);case"Select":return this.renderSelect(e);case"Radio":return this.renderRadio(e);case"Checkbox":return this.renderCheckbox(e)}};return e.pre_condition_activated?this.renderPreCondition(e,()=>t()):t()}_createContentElement(e){let t=document.createElement("div");return t.innerHTML=`<p>${e}</p>`,t}_createButton(e,t){let n=document.createElement("button");return n.type="button",n.innerText=e,n.onclick=(()=>t()),n}renderBoolean(e){let t=this._createContentElement(e.content),n=this._createButton("Non",()=>this.onAnswer(e.id,0)),o=this._createButton("Oui",()=>this.onAnswer(e.id,1));t.append(n),t.append(o),this.mountComponent(t)}renderPreCondition(e,t){let n=this._createContentElement(e.pre_condition_content),o=this._createButton(e.negative_answer_label,()=>this.onAnswer(e.id,"_IGNORE_")),r=this._createButton(e.positive_answer_label,()=>t());n.append(o),n.append(r),this.mountComponent(n)}renderText(e){let t=this._createContentElement(e.content),n=document.createElement("input");n.type="text",n.oninput=(()=>o.style.color="unset");let o=document.createElement("p");o.innerText=e.configuration.validation_reqs;let r=this._createButton(this.labels.next,()=>{!e.configuration.pattern||n.value.match(e.configuration.pattern)?this.onAnswer(e.id,n.value):o.style.color="red"});t.append(n),t.append(o),t.append(r),this.mountComponent(t)}renderSelect(e){let t=this._createContentElement(e.content),n=document.createElement("select");e.configuration.options.forEach(e=>{let t=document.createElement("option");t.value=e.id,t.innerText=e.value,n.append(t)});let o=this._createButton(this.labels.next,()=>this.onAnswer(e.id,n.value));t.append(n),t.append(o),this.mountComponent(t)}renderRadio(e){let t=this._createContentElement(e.content);e.configuration.options.forEach(n=>{let o=document.createElement("label"),r=document.createElement("input");r.type="radio",r.name=e.id,r.value=n.id,o.append(r),o.append(n.value),t.append(o)});let n=this._createButton(this.labels.next,()=>{this.onAnswer(e.id,document.querySelector(`input[name=${e.id}]:checked`).value)});t.append(n),this.mountComponent(t)}renderCheckbox(e){let t=this._createContentElement(e.content);e.configuration.options.forEach(n=>{let o=document.createElement("label"),r=document.createElement("input");r.type="checkbox",r.name=e.id,r.value=n.id,o.append(r),o.append(n.value),t.append(o)});let n=this._createButton(this.labels.next,()=>{this.onAnswer(e.id,Array.from(document.querySelectorAll(`input[name=${e.id}]:checked`)).map(e=>e.value))});t.append(n),this.mountComponent(t)}}
